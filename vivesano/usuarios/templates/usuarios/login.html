{% extends 'core/base.html' %}

{% block title %}Iniciar sesiÃ³n - Ecofor Market{% endblock %}

{% block content %}
<div class="auth-page">
  <div class="auth-card">
    <h1 class="auth-title">Inicio de sesiÃ³n</h1>

    {% if form.errors %}
      <div class="message message-error">
        Rut o contraseÃ±a incorrectos.
      </div>
    {% endif %}

    <form method="POST">
      {% csrf_token %}

      <div class="form-group">
        <label class="form-label">Usuario o Rut</label>
        {{ form.username }}
      </div>

      <div class="form-group">
        <label class="form-label">ContraseÃ±a</label>

        <div style="display: flex; align-items: center;">
          {{ form.password }}

          <!-- BotÃ³n para mostrar/ocultar -->
          <button 
            type="button" 
            id="togglePassword" 
            style="margin-left: 8px; background:none; border:none; font-size:1.2rem; cursor:pointer;"
          >
            ğŸ‘ï¸
          </button>
        </div>
      </div>
      

      <div style="margin-top:1.5rem; text-align:center;">
        <button type="submit" class="btn btn-primary" style="width: 70%;">Ingresar</button>
      </div>

      <div style="margin-top:1rem; text-align:center; font-size:0.85rem;">
        <a href="{% url 'password_reset' %}" style="color:#f2c14f;">Â¿Olvidaste tu contraseÃ±a?</a>
      </div>

      <div style="margin-top:0.5rem; text-align:center; font-size:0.85rem;">
        Â¿No tienes una cuenta?
        <a href="{% url 'registrar' %}" style="color:#f2c14f;">Crear una cuenta</a>
      </div>
    </form>
  </div>
</div>

<!-- Script para mostrar/ocultar contraseÃ±a -->
<script>
document.getElementById("togglePassword").addEventListener("click", function () {
    const passwordField = document.getElementById("id_password");

    if (passwordField.type === "password") {
        passwordField.type = "text";
        this.textContent = "ğŸ”’"; 
    } else {
        passwordField.type = "password";
        this.textContent = "ğŸ”"; 
    }
});
</script>

{% endblock %}
<!--Django genera automÃ¡ticamente el id del input de contraseÃ±a como: id_password
Por eso en el script se usa: document.getElementById("id_password") -->